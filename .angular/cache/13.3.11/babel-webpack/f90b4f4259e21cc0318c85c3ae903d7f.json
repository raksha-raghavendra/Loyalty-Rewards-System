{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet RewardsComponent = class RewardsComponent {\n  constructor(rewardService, userService) {\n    this.rewardService = rewardService;\n    this.userService = userService;\n    this.rewards = [];\n  }\n\n  ngOnInit() {\n    this.fetchRewards();\n  }\n\n  fetchRewards() {\n    this.rewardService.getRewards().subscribe(data => {\n      console.log('Rewards data received:', data);\n      this.rewards = data;\n    }, error => {\n      console.error('Error fetching rewards', error);\n    });\n  }\n\n  purchaseReward(reward) {\n    const rewardPurchase = {\n      id: reward.id,\n      user_id: this.getCurrentUserId(),\n      points_earned: 0\n    };\n    this.rewardService.createPurchase(rewardPurchase).subscribe(response => {\n      console.log('Purchase successful:', response); // Optionally, update UI or show a success message\n      // You may want to fetch rewards again after a successful purchase\n\n      this.fetchRewards();\n    }, error => {\n      console.error('Error purchasing reward:', error); // Optionally, handle error or show an error message\n    });\n  }\n\n  getCurrentUserId() {\n    try {\n      return this.userService.getCurrentUserId();\n    } catch (error) {\n      console.error(error.message);\n      return 0; // Or handle error as needed\n    }\n  }\n\n};\nRewardsComponent = __decorate([Component({\n  selector: 'app-rewards',\n  templateUrl: './rewards.component.html',\n  styleUrls: ['./rewards.component.css']\n})], RewardsComponent);\nexport { RewardsComponent };","map":null,"metadata":{},"sourceType":"module"}